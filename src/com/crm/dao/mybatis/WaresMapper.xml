<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crm.dao.mybatis.WaresMapper">   

	<insert id="addWares" parameterType="com.crm.domain.Wares" >
		<selectKey keyProperty="id" resultType="String" order="BEFORE">
			select replace(UUID(), "-", "")
		</selectKey>
			insert into award(<trim suffixOverrides=",">
			<if test="id !=null and id !=''">id,</if>
            <if test="name !=null and name !=''">name,</if>
            <if test="realPrice !=null and realPrice !=''">realPrice,</if>
            <if test="creater !=null and creater !=''">creater,</if>
            <if test="publicCode !=null and publicCode !=''">publicCode,</if>
            <if test="privateCode !=null and privateCode !=''">privateCode,</if>
            <if test="insideCode !=null and insideCode !=''">insideCode,</if>
            <if test="awardId !=null and awardId !=''">awardId,</if>
            <if test="number !=null and number !=''">number,</if>
            <if test="batch !=null and batch !=''">batch,</if>
            <if test="createTime !=null and createTime !=''">createTime,</if>
            <if test="image !=null and image !=''">image,</if>
            <if test="sellPrice !=null and sellPrice !=''">sellPrice</if>
            </trim>)values(<trim suffixOverrides=",">
            <if test="id !=null and id !=''">#{id},</if>
            <if test="name !=null and name !=''">#{name},</if>
            <if test="realPrice !=null and realPrice !=''">#{realPrice},</if>
            <if test="creater !=null and creater !=''">#{creater},</if>
            <if test="publicCode !=null and publicCode !=''">#{publicCode},</if>
            <if test="privateCode !=null and privateCode !=''">#{privateCode},</if>
            <if test="insideCode !=null and insideCode !=''">#{insideCode},</if>
            <if test="awardId !=null and awardId !=''">#{awardId},</if>
            <if test="number !=null and number !=''">#{number},</if>
            <if test="batch !=null and batch !=''">#{batch},</if>
            <if test="createTime !=null and createTime !=''">#{createTime},</if>
            <if test="image !=null and image !=''">#{image},</if>
            <if test="sellPrice !=null and sellPrice !=''">#{sellPrice}</if>
            </trim>)
	</insert>
	
	<delete id="deleteWares" parameterType="String">
		delete from wares where id=#{id}
	</delete>
	
	<update id="updateWares">
    	update wares
    	<set>
            <if test="name !=null and name !=''">name=#{name},</if>
            <if test="realPrice !=null and realPrice !=''">realPrice=#{realPrice},</if>
            <if test="creater !=null and creater !=''">creater=#{creater},</if>
            <if test="publicCode !=null and publicCode !=''">publicCode=#{publicCode},</if>
            <if test="privateCode !=null and privateCode !=''">privateCode=#{privateCode},</if>
            <if test="insideCode !=null and insideCode !=''">insideCode=#{insideCode},</if>
            <if test="awardId !=null and awardId !=''">awardId=#{awardId},</if>
            <if test="number !=null and number !=''">number=#{number},</if>
            <if test="batch !=null and batch !=''">batch=#{batch},</if>
            <if test="createTime !=null and createTime !=''">createTime=#{createTime},</if>
            <if test="image !=null and image !=''">image=#{image},</if>
            <if test="sellPrice !=null and sellPrice !=''">sellPrice=#{sellPrice}</if>
    	</set>
    	where id = #{id}
    </update>
	
	<select id="findByNumber" resultType="com.crm.domain.Wares">
		select t.id,t.name,t.realPrice,t.creater,t.publicCode,t.privateCode,t.insideCode,t.awardId,t.number,t.batch,t.createTime,t.image,t.sellPrice from wares t where t.number=#{number}
	</select>
	
	<select id="findById" resultType="com.crm.domain.Wares">
		select t.id,t.name,t.realPrice,t.creater,t.publicCode,t.privateCode,t.insideCode,t.awardId,t.number,t.batch,t.createTime,t.image,t.sellPrice from wares t where t.id=#{id}
	</select> 
	
	<select id="getDatagrid" parameterType="String" resultType="com.crm.domain.Wares">
		select t.id,t.name,t.realPrice,t.creater,t.publicCode,t.privateCode,t.insideCode,t.awardId,t.number,t.batch,t.createTime,t.image,t.sellPrice from wares t where 1=1 
		<if test="conditionSql != null and conditionSql != ''">
            ${conditionSql}
        </if>
	</select>
	
	<select id="getDatagridTotal" resultType="long">
		select count(1) from wares where  1=1
		<if test="name != null and name != ''">
            and name like concat('%',#{name},'%')
        </if>
        <if test="publicCode != null and publicCode != ''">
            and publicCode = #{publicCode}
        </if>
        <if test="privateCode != null and privateCode != ''">
            and privateCode = #{privateCode}
        </if>
	</select>
	
	<select id="datagridWares" resultType="com.crm.domain.Wares">
		select t.id,t.name,t.realPrice,t.creater,t.publicCode,t.privateCode,t.insideCode,t.awardId,t.number,t.batch,t.createTime,t.image,t.sellPrice from wares t where 1=1
		<if test="wares.name != null and wares.name != ''">
			and t.name like concat('%',#{wares.name},'%')
		</if>
		<if test="wares.creater != null and wares.creater != ''">
			and t.creater = #{wares.creater}
		</if>
		<if test="wares.awardId != null and wares.awardId != ''">
			and t.awardId = #{wares.awardId}
		</if>
		<if test="wares.batch != null and wares.batch != ''">
			and t.batch = #{wares.batch}
		</if>
		<if test="page.sort != null and page.sort != ''">
            order by #{page.sort} #{page.order}
        </if>
        <if test="page.page > 0">
            limit #{page.start},#{page.end}
        </if>
	</select>
	
	<select id="datagridWaresByCondition" resultType="com.crm.domain.Wares">
		select t.id,t.name,t.realPrice,t.creater,t.publicCode,t.privateCode,t.insideCode,t.awardId,t.number,t.batch,t.createTime,t.image,t.sellPrice from wares t where 1=1
		<if test="conditionSql != null and conditionSql != ''">
			${conditionSql}
		</if>
		<if test="page.sort != null and page.sort != ''">
            order by #{page.sort} #{page.order}
        </if>
        <if test="page.page > 0">
            limit #{page.start},#{page.end}
        </if>
	</select>
	
</mapper>
